<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 8 Debugging | Best Coding Practices for R</title>
  <meta name="description" content="This book explains the most important things you need to know while you are writing production level R code." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 8 Debugging | Best Coding Practices for R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book explains the most important things you need to know while you are writing production level R code." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 8 Debugging | Best Coding Practices for R" />
  
  <meta name="twitter:description" content="This book explains the most important things you need to know while you are writing production level R code." />
  

<meta name="author" content="Vikram Singh Rawat" />


<meta name="date" content="2021-04-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="dataManagement.html"/>
<link rel="next" href="types.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Best Coding Practices for R </a></li>

<li class="divider"></li>
<li class="part"><span><b>I Introduction</b></span></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>CoverPage</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="part"><span><b>II Structure</b></span></li>
<li class="chapter" data-level="2" data-path="folder.html"><a href="folder.html"><i class="fa fa-check"></i><b>2</b> Folder Structure</a>
<ul>
<li class="chapter" data-level="2.1" data-path="folder.html"><a href="folder.html#organizing-files"><i class="fa fa-check"></i><b>2.1</b> Organizing files</a></li>
<li class="chapter" data-level="2.2" data-path="folder.html"><a href="folder.html#create-projects"><i class="fa fa-check"></i><b>2.2</b> Create Projects</a></li>
<li class="chapter" data-level="2.3" data-path="folder.html"><a href="folder.html#naming-files"><i class="fa fa-check"></i><b>2.3</b> Naming files</a></li>
<li class="chapter" data-level="2.4" data-path="folder.html"><a href="folder.html#folders-based-on-file-type"><i class="fa fa-check"></i><b>2.4</b> Folders Based on File-Type</a></li>
<li class="chapter" data-level="2.5" data-path="folder.html"><a href="folder.html#creating-sub-folders"><i class="fa fa-check"></i><b>2.5</b> Creating Sub-folders</a></li>
<li class="chapter" data-level="2.6" data-path="folder.html"><a href="folder.html#conclusion"><i class="fa fa-check"></i><b>2.6</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="code.html"><a href="code.html"><i class="fa fa-check"></i><b>3</b> Code Structure</a>
<ul>
<li class="chapter" data-level="3.1" data-path="code.html"><a href="code.html#create-sections"><i class="fa fa-check"></i><b>3.1</b> Create Sections</a></li>
<li class="chapter" data-level="3.2" data-path="code.html"><a href="code.html#order-of-code"><i class="fa fa-check"></i><b>3.2</b> Order of Code</a></li>
<li class="chapter" data-level="3.3" data-path="code.html"><a href="code.html#indentation"><i class="fa fa-check"></i><b>3.3</b> Indentation</a></li>
<li class="chapter" data-level="3.4" data-path="code.html"><a href="code.html#conclusion-1"><i class="fa fa-check"></i><b>3.4</b> Conclusion’</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="func.html"><a href="func.html"><i class="fa fa-check"></i><b>4</b> Functions</a>
<ul>
<li class="chapter" data-level="4.1" data-path="func.html"><a href="func.html#metadata-or-information-header"><i class="fa fa-check"></i><b>4.1</b> Metadata or Information header</a></li>
<li class="chapter" data-level="4.2" data-path="func.html"><a href="func.html#pass-everything-through-parameters"><i class="fa fa-check"></i><b>4.2</b> Pass everything through parameters</a></li>
<li class="chapter" data-level="4.3" data-path="func.html"><a href="func.html#use-return-statement"><i class="fa fa-check"></i><b>4.3</b> Use Return Statement</a></li>
<li class="chapter" data-level="4.4" data-path="func.html"><a href="func.html#keep-a-consistency-in-return-type"><i class="fa fa-check"></i><b>4.4</b> Keep a consistency in Return Type</a></li>
<li class="chapter" data-level="4.5" data-path="func.html"><a href="func.html#use-sensible-names-for-parameters-too"><i class="fa fa-check"></i><b>4.5</b> Use Sensible Names for parameters too…</a></li>
<li class="chapter" data-level="4.6" data-path="func.html"><a href="func.html#use-trycatch"><i class="fa fa-check"></i><b>4.6</b> use tryCatch</a></li>
<li class="chapter" data-level="4.7" data-path="func.html"><a href="func.html#write-simple-and-unique-functions"><i class="fa fa-check"></i><b>4.7</b> Write simple and unique functions</a></li>
<li class="chapter" data-level="4.8" data-path="func.html"><a href="func.html#dont-load-libraries-or-source-code-inside-a-function"><i class="fa fa-check"></i><b>4.8</b> Don’t load libraries or source code inside a function</a></li>
<li class="chapter" data-level="4.9" data-path="func.html"><a href="func.html#use-packagefunction-approach"><i class="fa fa-check"></i><b>4.9</b> Use Package::Function() approach</a>
<ul>
<li class="chapter" data-level="4.9.1" data-path="func.html"><a href="func.html#you-should-load-libraries-in-the-order-of-their-usage"><i class="fa fa-check"></i><b>4.9.1</b> You should load libraries in the order of their usage</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="func.html"><a href="func.html#conclusion-2"><i class="fa fa-check"></i><b>4.10</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="names.html"><a href="names.html"><i class="fa fa-check"></i><b>5</b> Naming Conventions</a>
<ul>
<li class="chapter" data-level="5.1" data-path="names.html"><a href="names.html#popular-naming-conventions"><i class="fa fa-check"></i><b>5.1</b> Popular naming conventions</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="names.html"><a href="names.html#camelcase"><i class="fa fa-check"></i><b>5.1.1</b> camelCase</a></li>
<li class="chapter" data-level="5.1.2" data-path="names.html"><a href="names.html#pascalcase"><i class="fa fa-check"></i><b>5.1.2</b> PascalCase</a></li>
<li class="chapter" data-level="5.1.3" data-path="names.html"><a href="names.html#snake_case"><i class="fa fa-check"></i><b>5.1.3</b> snake_case</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="names.html"><a href="names.html#informative-names"><i class="fa fa-check"></i><b>5.2</b> Informative Names</a></li>
<li class="chapter" data-level="5.3" data-path="names.html"><a href="names.html#conclusions"><i class="fa fa-check"></i><b>5.3</b> Conclusions</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="envManagement.html"><a href="envManagement.html"><i class="fa fa-check"></i><b>6</b> Environment Management</a>
<ul>
<li class="chapter" data-level="6.1" data-path="envManagement.html"><a href="envManagement.html#avoid-package-dependencies-when-possible"><i class="fa fa-check"></i><b>6.1</b> Avoid package dependencies when possible</a></li>
<li class="chapter" data-level="6.2" data-path="envManagement.html"><a href="envManagement.html#renv-for-package-management"><i class="fa fa-check"></i><b>6.2</b> renv for package management</a></li>
<li class="chapter" data-level="6.3" data-path="envManagement.html"><a href="envManagement.html#config-for-external-dependencies"><i class="fa fa-check"></i><b>6.3</b> config for external dependencies</a></li>
<li class="chapter" data-level="6.4" data-path="envManagement.html"><a href="envManagement.html#conclusion-3"><i class="fa fa-check"></i><b>6.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="dataManagement.html"><a href="dataManagement.html"><i class="fa fa-check"></i><b>7</b> data Management</a>
<ul>
<li class="chapter" data-level="7.1" data-path="dataManagement.html"><a href="dataManagement.html#keep-a-copy-or-your-data"><i class="fa fa-check"></i><b>7.1</b> Keep a Copy or your Data</a></li>
<li class="chapter" data-level="7.2" data-path="dataManagement.html"><a href="dataManagement.html#dont-use-numbers-for-columns"><i class="fa fa-check"></i><b>7.2</b> Don’t use numbers for columns</a></li>
<li class="chapter" data-level="7.3" data-path="dataManagement.html"><a href="dataManagement.html#keep-meaningful-and-proper-column-names"><i class="fa fa-check"></i><b>7.3</b> Keep Meaningful and proper column names</a></li>
<li class="chapter" data-level="7.4" data-path="dataManagement.html"><a href="dataManagement.html#use-databases"><i class="fa fa-check"></i><b>7.4</b> Use Databases</a></li>
<li class="chapter" data-level="7.5" data-path="dataManagement.html"><a href="dataManagement.html#use-efficient-packages"><i class="fa fa-check"></i><b>7.5</b> Use Efficient Packages</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="dataManagement.html"><a href="dataManagement.html#data.table"><i class="fa fa-check"></i><b>7.5.1</b> data.table</a></li>
<li class="chapter" data-level="7.5.2" data-path="dataManagement.html"><a href="dataManagement.html#matrix"><i class="fa fa-check"></i><b>7.5.2</b> Matrix</a></li>
<li class="chapter" data-level="7.5.3" data-path="dataManagement.html"><a href="dataManagement.html#disk.frame"><i class="fa fa-check"></i><b>7.5.3</b> disk.frame</a></li>
<li class="chapter" data-level="7.5.4" data-path="dataManagement.html"><a href="dataManagement.html#modeldb"><i class="fa fa-check"></i><b>7.5.4</b> modeldb</a></li>
<li class="chapter" data-level="7.5.5" data-path="dataManagement.html"><a href="dataManagement.html#dbplot"><i class="fa fa-check"></i><b>7.5.5</b> dbplot</a></li>
<li class="chapter" data-level="7.5.6" data-path="dataManagement.html"><a href="dataManagement.html#sparklyr"><i class="fa fa-check"></i><b>7.5.6</b> sparklyr</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="dataManagement.html"><a href="dataManagement.html#conclusion-4"><i class="fa fa-check"></i><b>7.6</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="debug.html"><a href="debug.html"><i class="fa fa-check"></i><b>8</b> Debugging</a>
<ul>
<li class="chapter" data-level="8.1" data-path="debug.html"><a href="debug.html#write-unit-tests"><i class="fa fa-check"></i><b>8.1</b> Write Unit Tests</a></li>
<li class="chapter" data-level="8.2" data-path="debug.html"><a href="debug.html#browser-and-print-are-your-friend"><i class="fa fa-check"></i><b>8.2</b> Browser() and print() are your friend</a></li>
<li class="chapter" data-level="8.3" data-path="debug.html"><a href="debug.html#read-the-functions"><i class="fa fa-check"></i><b>8.3</b> <strong>Read the functions</strong></a></li>
<li class="chapter" data-level="8.4" data-path="debug.html"><a href="debug.html#version-control-system"><i class="fa fa-check"></i><b>8.4</b> Version Control System</a></li>
<li class="chapter" data-level="8.5" data-path="debug.html"><a href="debug.html#make-small-commits"><i class="fa fa-check"></i><b>8.5</b> Make small commits</a></li>
<li class="chapter" data-level="8.6" data-path="debug.html"><a href="debug.html#use-curly-brackets"><i class="fa fa-check"></i><b>8.6</b> Use curly brackets</a></li>
<li class="chapter" data-level="8.7" data-path="debug.html"><a href="debug.html#always-use-named-parameters"><i class="fa fa-check"></i><b>8.7</b> Always use named parameters</a></li>
<li class="chapter" data-level="8.8" data-path="debug.html"><a href="debug.html#log-the-errors"><i class="fa fa-check"></i><b>8.8</b> Log the errors</a></li>
<li class="chapter" data-level="8.9" data-path="debug.html"><a href="debug.html#dont-use-already-used-names"><i class="fa fa-check"></i><b>8.9</b> Don’t Use already used names</a></li>
<li class="chapter" data-level="8.10" data-path="debug.html"><a href="debug.html#use-simple-code"><i class="fa fa-check"></i><b>8.10</b> Use Simple code</a></li>
<li class="chapter" data-level="8.11" data-path="debug.html"><a href="debug.html#conclusion-5"><i class="fa fa-check"></i><b>8.11</b> Conclusion</a></li>
</ul></li>
<li class="part"><span><b>III Memory</b></span></li>
<li class="chapter" data-level="9" data-path="types.html"><a href="types.html"><i class="fa fa-check"></i><b>9</b> Type System</a>
<ul>
<li class="chapter" data-level="9.1" data-path="types.html"><a href="types.html#things-you-should-know"><i class="fa fa-check"></i><b>9.1</b> Things you should know</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="types.html"><a href="types.html#r-dont-have-scalar-data-types"><i class="fa fa-check"></i><b>9.1.1</b> R don’t have scalar data types</a></li>
<li class="chapter" data-level="9.1.2" data-path="types.html"><a href="types.html#dates-are-basically-integers-under-the-hood."><i class="fa fa-check"></i><b>9.1.2</b> Dates are basically integers under the hood.</a></li>
<li class="chapter" data-level="9.1.3" data-path="types.html"><a href="types.html#posixlt-are-basically-lists-under-the-hood"><i class="fa fa-check"></i><b>9.1.3</b> POSIXlt are basically lists under the hood</a></li>
<li class="chapter" data-level="9.1.4" data-path="types.html"><a href="types.html#integers-are-smaller-than-numeric"><i class="fa fa-check"></i><b>9.1.4</b> Integers are smaller than numeric</a></li>
<li class="chapter" data-level="9.1.5" data-path="types.html"><a href="types.html#define-your-datatypes-before-the-variable"><i class="fa fa-check"></i><b>9.1.5</b> define your datatypes before the variable</a></li>
<li class="chapter" data-level="9.1.6" data-path="types.html"><a href="types.html#lists-are-better-than-dataframe-under-a-loop"><i class="fa fa-check"></i><b>9.1.6</b> lists are better than dataframe under a loop</a></li>
<li class="chapter" data-level="9.1.7" data-path="types.html"><a href="types.html#use-lists-whenever-possible"><i class="fa fa-check"></i><b>9.1.7</b> use lists whenever possible</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="types.html"><a href="types.html#choose-data-types-carefully"><i class="fa fa-check"></i><b>9.2</b> Choose data types carefully</a></li>
<li class="chapter" data-level="9.3" data-path="types.html"><a href="types.html#dont-change-datatypes"><i class="fa fa-check"></i><b>9.3</b> don’t change datatypes</a></li>
<li class="chapter" data-level="9.4" data-path="types.html"><a href="types.html#future-of-type-system-in-r"><i class="fa fa-check"></i><b>9.4</b> Future of type-system in R</a></li>
<li class="chapter" data-level="9.5" data-path="types.html"><a href="types.html#conclusion-6"><i class="fa fa-check"></i><b>9.5</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="reference.html"><a href="reference.html"><i class="fa fa-check"></i><b>10</b> Pass By Value-Reference</a>
<ul>
<li class="chapter" data-level="10.1" data-path="reference.html"><a href="reference.html#understanding-the-system"><i class="fa fa-check"></i><b>10.1</b> Understanding the system</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="reference.html"><a href="reference.html#pass-by-value"><i class="fa fa-check"></i><b>10.1.1</b> Pass by Value</a></li>
<li class="chapter" data-level="10.1.2" data-path="reference.html"><a href="reference.html#pass-by-reference"><i class="fa fa-check"></i><b>10.1.2</b> Pass by reference</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="reference.html"><a href="reference.html#copy-on-modify"><i class="fa fa-check"></i><b>10.2</b> Copy on modify</a></li>
<li class="chapter" data-level="10.3" data-path="reference.html"><a href="reference.html#for-pass-by-reference"><i class="fa fa-check"></i><b>10.3</b> for pass by reference</a></li>
<li class="chapter" data-level="10.4" data-path="reference.html"><a href="reference.html#conclusion-7"><i class="fa fa-check"></i><b>10.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="releasememory.html"><a href="releasememory.html"><i class="fa fa-check"></i><b>11</b> Release Memory</a>
<ul>
<li class="chapter" data-level="11.1" data-path="releasememory.html"><a href="releasememory.html#use-rm"><i class="fa fa-check"></i><b>11.1</b> use rm()</a></li>
<li class="chapter" data-level="11.2" data-path="releasememory.html"><a href="releasememory.html#use-gc"><i class="fa fa-check"></i><b>11.2</b> use gc()</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="releasememory.html"><a href="releasememory.html#r-version-3.5"><i class="fa fa-check"></i><b>11.2.1</b> R version 3.5</a></li>
<li class="chapter" data-level="11.2.2" data-path="releasememory.html"><a href="releasememory.html#r-version-4.0"><i class="fa fa-check"></i><b>11.2.2</b> R version 4.0</a></li>
<li class="chapter" data-level="11.2.3" data-path="releasememory.html"><a href="releasememory.html#inside-a-heavy-loop"><i class="fa fa-check"></i><b>11.2.3</b> Inside a heavy loop</a></li>
<li class="chapter" data-level="11.2.4" data-path="releasememory.html"><a href="releasememory.html#anything-that-takes-more-than-30-seconds"><i class="fa fa-check"></i><b>11.2.4</b> anything that takes more than 30 seconds</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="releasememory.html"><a href="releasememory.html#cache-store-calculations"><i class="fa fa-check"></i><b>11.3</b> Cache / Store calculations</a></li>
<li class="chapter" data-level="11.4" data-path="releasememory.html"><a href="releasememory.html#conclusion-8"><i class="fa fa-check"></i><b>11.4</b> Conclusion</a></li>
</ul></li>
<li class="part"><span><b>IV Speed</b></span></li>
<li class="chapter" data-level="12" data-path="speedtips.html"><a href="speedtips.html"><i class="fa fa-check"></i><b>12</b> Some Tips to make R code faster</a>
<ul>
<li class="chapter" data-level="12.1" data-path="speedtips.html"><a href="speedtips.html#use-latest-version-of-r"><i class="fa fa-check"></i><b>12.1</b> Use Latest version of R</a></li>
<li class="chapter" data-level="12.2" data-path="speedtips.html"><a href="speedtips.html#benchmark-and-profiling-the-code"><i class="fa fa-check"></i><b>12.2</b> Benchmark and profiling the code</a></li>
<li class="chapter" data-level="12.3" data-path="speedtips.html"><a href="speedtips.html#algorithm-matters-more-than-language"><i class="fa fa-check"></i><b>12.3</b> Algorithm matters more than language</a></li>
<li class="chapter" data-level="12.4" data-path="speedtips.html"><a href="speedtips.html#read-the-function"><i class="fa fa-check"></i><b>12.4</b> Read the function</a></li>
<li class="chapter" data-level="12.5" data-path="speedtips.html"><a href="speedtips.html#use-conditionals-to-break-computations"><i class="fa fa-check"></i><b>12.5</b> Use Conditionals to break computations</a></li>
<li class="chapter" data-level="12.6" data-path="speedtips.html"><a href="speedtips.html#use-faster-packages"><i class="fa fa-check"></i><b>12.6</b> Use Faster packages</a></li>
<li class="chapter" data-level="12.7" data-path="speedtips.html"><a href="speedtips.html#some-pointers"><i class="fa fa-check"></i><b>12.7</b> Some pointers</a>
<ul>
<li class="chapter" data-level="12.7.1" data-path="speedtips.html"><a href="speedtips.html#use-instead-of-when-you-can"><i class="fa fa-check"></i><b>12.7.1</b> use [[ instead of [ when you can</a></li>
<li class="chapter" data-level="12.7.2" data-path="speedtips.html"><a href="speedtips.html#r-calculates-everything"><i class="fa fa-check"></i><b>12.7.2</b> R calculates everything</a></li>
<li class="chapter" data-level="12.7.3" data-path="speedtips.html"><a href="speedtips.html#internal-functions"><i class="fa fa-check"></i><b>12.7.3</b> .Internal functions</a></li>
<li class="chapter" data-level="12.7.4" data-path="speedtips.html"><a href="speedtips.html#dont-compile"><i class="fa fa-check"></i><b>12.7.4</b> Don’t Compile</a></li>
<li class="chapter" data-level="12.7.5" data-path="speedtips.html"><a href="speedtips.html#use-direct-method.object-structure"><i class="fa fa-check"></i><b>12.7.5</b> use direct method.object structure</a></li>
</ul></li>
<li class="chapter" data-level="12.8" data-path="speedtips.html"><a href="speedtips.html#export-other-languages"><i class="fa fa-check"></i><b>12.8</b> Export Other languages</a></li>
<li class="chapter" data-level="12.9" data-path="speedtips.html"><a href="speedtips.html#conclusion-9"><i class="fa fa-check"></i><b>12.9</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="loops.html"><a href="loops.html"><i class="fa fa-check"></i><b>13</b> For Loops</a>
<ul>
<li class="chapter" data-level="13.1" data-path="loops.html"><a href="loops.html#initialize-objects-before-loops"><i class="fa fa-check"></i><b>13.1</b> initialize objects before loops</a></li>
<li class="chapter" data-level="13.2" data-path="loops.html"><a href="loops.html#use-simple-data-types"><i class="fa fa-check"></i><b>13.2</b> use simple data-types</a></li>
<li class="chapter" data-level="13.3" data-path="loops.html"><a href="loops.html#apply-family"><i class="fa fa-check"></i><b>13.3</b> apply family</a></li>
<li class="chapter" data-level="13.4" data-path="loops.html"><a href="loops.html#vectorize-your-code"><i class="fa fa-check"></i><b>13.4</b> Vectorize your code</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="loops.html"><a href="loops.html#never-repeat-a-calculation"><i class="fa fa-check"></i><b>13.4.1</b> never repeat a calculation</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="loops.html"><a href="loops.html#do-very-little-inside-loops"><i class="fa fa-check"></i><b>13.5</b> Do very little inside loops</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="multithreading.html"><a href="multithreading.html"><i class="fa fa-check"></i><b>14</b> Multithreading</a></li>
<li class="part"><span><b>V Shiny Tips</b></span></li>
<li class="chapter" data-level="15" data-path="shinyspeed.html"><a href="shinyspeed.html"><i class="fa fa-check"></i><b>15</b> Speed</a></li>
<li class="chapter" data-level="16" data-path="shinymemory.html"><a href="shinymemory.html"><i class="fa fa-check"></i><b>16</b> Memory</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Best Coding Practices for R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="debug" class="section level1" number="8">
<h1><span class="header-section-number">Chapter 8</span> Debugging</h1>
<p>Debugging is a part of being a programmer. You just can’t escape it. It’s a huge topic and it takes years of experience to master. To understand the limitations of a language and to understand the errors requires too much study and experience. This is something that you learn through experience. But there are certain thing which you can do to make your life easier while debugging.</p>
<p>These are the tips I think everyone should follow for better debugging experience.</p>
<div id="write-unit-tests" class="section level2" number="8.1">
<h2><span class="header-section-number">8.1</span> Write Unit Tests</h2>
<p>When you are writing a function and you have enough time to document the expected results of a function it’s a good practice to write down your expectations as a code. In R there is an excellent package called <code>testthat</code> for doing it. You don’t need to create a package to test your code. You can simply test your functions by sourcing the entire file.</p>
<p>Sky is the limit when you want to test your code. You have to decide how much time you have and how much are willing to write for testing. There has to be a minimum limit of tests for each sprint. That actually keeps you in track.</p>
<p>Let’s start with a very simple example.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="debug.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(testthat)</span></code></pre></div>
<pre><code>## Warning: package &#39;testthat&#39; was built under R version 4.0.4</code></pre>
<pre><code>## 
## Attaching package: &#39;testthat&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     matches</code></pre>
<pre><code>## The following objects are masked from &#39;package:magrittr&#39;:
## 
##     equals, is_less_than, not</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="debug.html#cb48-1" aria-hidden="true" tabindex="-1"></a>foo <span class="ot">&lt;-</span> <span class="cf">function</span>(name){</span>
<span id="cb48-2"><a href="debug.html#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">length</span>(name) <span class="sc">==</span> <span class="dv">0</span>){</span>
<span id="cb48-3"><a href="debug.html#cb48-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">&quot;please provide a character&quot;</span>)</span>
<span id="cb48-4"><a href="debug.html#cb48-4" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb48-5"><a href="debug.html#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span> <span class="fu">is.na</span>(name)){</span>
<span id="cb48-6"><a href="debug.html#cb48-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>( <span class="sc">!</span><span class="fu">is.character</span>(name) ){</span>
<span id="cb48-7"><a href="debug.html#cb48-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">stop</span>(<span class="st">&quot;please provide a character&quot;</span>)</span>
<span id="cb48-8"><a href="debug.html#cb48-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb48-9"><a href="debug.html#cb48-9" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;Hello %s, good morning&quot;</span>, name)</span>
<span id="cb48-10"><a href="debug.html#cb48-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(x)</span>
<span id="cb48-11"><a href="debug.html#cb48-11" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span>{</span>
<span id="cb48-12"><a href="debug.html#cb48-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;please provide a name&quot;</span>)</span>
<span id="cb48-13"><a href="debug.html#cb48-13" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb48-14"><a href="debug.html#cb48-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb48-15"><a href="debug.html#cb48-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-16"><a href="debug.html#cb48-16" aria-hidden="true" tabindex="-1"></a>testthat<span class="sc">::</span><span class="fu">test_that</span>(</span>
<span id="cb48-17"><a href="debug.html#cb48-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">desc =</span> <span class="st">&quot;testing foo&quot;</span>,</span>
<span id="cb48-18"><a href="debug.html#cb48-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">code =</span> {</span>
<span id="cb48-19"><a href="debug.html#cb48-19" aria-hidden="true" tabindex="-1"></a>    <span class="do">## check original result</span></span>
<span id="cb48-20"><a href="debug.html#cb48-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect_equal</span>(</span>
<span id="cb48-21"><a href="debug.html#cb48-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">object =</span> <span class="fu">foo</span>(<span class="st">&quot;vikram&quot;</span>),</span>
<span id="cb48-22"><a href="debug.html#cb48-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">expected =</span> <span class="st">&quot;Hello vikram, good morning&quot;</span></span>
<span id="cb48-23"><a href="debug.html#cb48-23" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb48-24"><a href="debug.html#cb48-24" aria-hidden="true" tabindex="-1"></a>    <span class="do">## check results of NA</span></span>
<span id="cb48-25"><a href="debug.html#cb48-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect_equal</span>(</span>
<span id="cb48-26"><a href="debug.html#cb48-26" aria-hidden="true" tabindex="-1"></a>      <span class="at">object =</span> <span class="fu">foo</span>(<span class="cn">NA</span>),</span>
<span id="cb48-27"><a href="debug.html#cb48-27" aria-hidden="true" tabindex="-1"></a>      <span class="at">expected =</span> <span class="st">&quot;please provide a name&quot;</span></span>
<span id="cb48-28"><a href="debug.html#cb48-28" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb48-29"><a href="debug.html#cb48-29" aria-hidden="true" tabindex="-1"></a>    <span class="do">## check length of actual content</span></span>
<span id="cb48-30"><a href="debug.html#cb48-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect_length</span>(</span>
<span id="cb48-31"><a href="debug.html#cb48-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">object =</span> <span class="fu">foo</span>(<span class="st">&quot;vikram&quot;</span>),</span>
<span id="cb48-32"><a href="debug.html#cb48-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">n =</span> <span class="dv">1</span></span>
<span id="cb48-33"><a href="debug.html#cb48-33" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb48-34"><a href="debug.html#cb48-34" aria-hidden="true" tabindex="-1"></a>    <span class="do">## check Error on passing numeric code</span></span>
<span id="cb48-35"><a href="debug.html#cb48-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect_error</span>(</span>
<span id="cb48-36"><a href="debug.html#cb48-36" aria-hidden="true" tabindex="-1"></a>      <span class="at">object =</span> <span class="fu">foo</span>(<span class="dv">1</span>)</span>
<span id="cb48-37"><a href="debug.html#cb48-37" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb48-38"><a href="debug.html#cb48-38" aria-hidden="true" tabindex="-1"></a>    <span class="do">## check Error on passing Date code</span></span>
<span id="cb48-39"><a href="debug.html#cb48-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect_error</span>(</span>
<span id="cb48-40"><a href="debug.html#cb48-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">object =</span> <span class="fu">foo</span>(<span class="fu">Sys.Date</span>())</span>
<span id="cb48-41"><a href="debug.html#cb48-41" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb48-42"><a href="debug.html#cb48-42" aria-hidden="true" tabindex="-1"></a>    <span class="do">## check the error on NULL values</span></span>
<span id="cb48-43"><a href="debug.html#cb48-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">expect_error</span>(</span>
<span id="cb48-44"><a href="debug.html#cb48-44" aria-hidden="true" tabindex="-1"></a>      <span class="at">object =</span> <span class="fu">foo</span>(<span class="cn">NULL</span>)</span>
<span id="cb48-45"><a href="debug.html#cb48-45" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb48-46"><a href="debug.html#cb48-46" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb48-47"><a href="debug.html#cb48-47" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## Test passed</code></pre>
<p>This is how you need to write test for a simple hello world example. To tell you the truth I started with just basic equal test but then I realized</p>
<ul>
<li><p>what if someone passes a number or a date</p></li>
<li><p>what is someone passes a null value</p></li>
<li><p>what is someone passes a NA</p></li>
</ul>
<p>So on and so forth I started modifying the function and this is how you will too… This will make your function more secure and you will see less crashes. This is the reason I would like to begin this chapter with an emphasis on the fact that you should test your code.</p>
</div>
<div id="browser-and-print-are-your-friend" class="section level2" number="8.2">
<h2><span class="header-section-number">8.2</span> Browser() and print() are your friend</h2>
<p>To me <code>browser()</code> function feels like a scene from movie matrix where you can stop everything around you and decide what is going wrong in the world. When you want to debug any function or a point where you assume that the error lies here, you should use browser() inside that function or script. Don’t be scared of using browser() this function makes you familiar with your code and R itself.</p>
<p><code>Browser</code> is useful only when you know what function to look at. <code>Print</code> is your friend when you want to narrow down the candidates which are causing the error. Printing the objects on the console with help you understand what is happening inside a given function at the moment. It’s very useful for interactive web apps where reproducing the error is a little tricky.</p>
<p>A combination of print and browser can save a lot of your time. And yes <strong>make sure you delete the browser functions from your file</strong>. You can use <code>ctrl + shift + f</code> to search the entire project and every file in it for searching anything, including browser function.</p>
</div>
<div id="read-the-functions" class="section level2" number="8.3">
<h2><span class="header-section-number">8.3</span> <strong>Read the functions</strong></h2>
<p>R gives you the ability to read the function and it comes very handy during debugging a function you have not written. You can view any function definition by running the function without <code>()</code> round brackets. like this</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="debug.html#cb50-1" aria-hidden="true" tabindex="-1"></a>quanteda<span class="sc">::</span>tokens</span></code></pre></div>
<pre><code>## function (x, what = &quot;word&quot;, remove_punct = FALSE, remove_symbols = FALSE, 
##     remove_numbers = FALSE, remove_url = FALSE, remove_separators = TRUE, 
##     split_hyphens = FALSE, include_docvars = TRUE, padding = FALSE, 
##     verbose = quanteda_options(&quot;verbose&quot;), ...) 
## {
##     tokens_env$START_TIME &lt;- proc.time()
##     object_class &lt;- class(x)[1]
##     if (verbose) 
##         catm(&quot;Creating a tokens object from a&quot;, object_class, 
##             &quot;input...\n&quot;)
##     UseMethod(&quot;tokens&quot;)
## }
## &lt;bytecode: 0x000000001c9864a8&gt;
## &lt;environment: namespace:quanteda&gt;</code></pre>
<p>And you can check which methods are available for which classes by using</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="debug.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">methods</span>(<span class="at">class =</span> <span class="st">&quot;dfm&quot;</span>)</span></code></pre></div>
<pre><code>##  [1] -             !             $             $&lt;-           %%           
##  [6] %*%           %/%           &amp;             *             /            
## [11] [             [[            [&lt;-           ^             +            
## [16] all           any           anyNA         Arith         as.data.frame
## [21] as.dfm        as.logical    as.matrix     as.numeric    bootstrap_dfm
## [26] cbind         cbind2        coerce        coerce&lt;-      colMeans     
## [31] colSums       Compare       convert       dfm           dfm_compress 
## [36] dfm_group     dfm_lookup    dfm_match     dfm_replace   dfm_sample   
## [41] dfm_select    dfm_smooth    dfm_sort      dfm_subset    dfm_tfidf    
## [46] dfm_tolower   dfm_toupper   dfm_trim      dfm_weight    dfm_wordstem 
## [51] dim           dim&lt;-         dimnames      dimnames&lt;-    docfreq      
## [56] docid         docnames      docnames&lt;-    docvars       docvars&lt;-    
## [61] fcm           featfreq      featnames     head          initialize   
## [66] is.finite     is.infinite   is.na         kronecker     length       
## [71] log           Logic         Math          Math2         meta         
## [76] meta&lt;-        ndoc          nfeat         ntoken        ntype        
## [81] Ops           print         rbind         rbind2        rep          
## [86] rowMeans      rownames&lt;-    rowSums       show          sparsity     
## [91] Summary       t             tail          topfeatures  
## see &#39;?methods&#39; for accessing help and source code</code></pre>
<p>Or you can check how many classes have a method by same name with.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="debug.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">methods</span>(<span class="at">generic.function =</span> <span class="st">&quot;print&quot;</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>]</span></code></pre></div>
<pre><code>##  [1] &quot;print,ANY-method&quot;            &quot;print,dfm-method&quot;           
##  [3] &quot;print,diagonalMatrix-method&quot; &quot;print,dictionary2-method&quot;   
##  [5] &quot;print,fcm-method&quot;            &quot;print,sparseMatrix-method&quot;  
##  [7] &quot;print.acf&quot;                   &quot;print.AES&quot;                  
##  [9] &quot;print.all_vars&quot;              &quot;print.anova&quot;                
## [11] &quot;print.ansi_string&quot;           &quot;print.ansi_style&quot;           
## [13] &quot;print.any_vars&quot;              &quot;print.aov&quot;                  
## [15] &quot;print.aovlist&quot;               &quot;print.ar&quot;                   
## [17] &quot;print.Arima&quot;                 &quot;print.arima0&quot;               
## [19] &quot;print.AsIs&quot;                  &quot;print.aspell&quot;</code></pre>
<p>now most of these methods are hidden from general usage so you might not be able to view them.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="debug.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># textstat_lexdiv.dfm </span></span>
<span id="cb56-2"><a href="debug.html#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="co"># will not work will produce an error</span></span>
<span id="cb56-3"><a href="debug.html#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Error: object &#39;textstat_lexdiv.dfm&#39; not found</span></span>
<span id="cb56-4"><a href="debug.html#cb56-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-5"><a href="debug.html#cb56-5" aria-hidden="true" tabindex="-1"></a>quanteda.textstats<span class="sc">::</span>textstat_lexdiv</span></code></pre></div>
<pre><code>## function (x, measure = c(&quot;TTR&quot;, &quot;C&quot;, &quot;R&quot;, &quot;CTTR&quot;, &quot;U&quot;, &quot;S&quot;, &quot;K&quot;, 
##     &quot;I&quot;, &quot;D&quot;, &quot;Vm&quot;, &quot;Maas&quot;, &quot;MATTR&quot;, &quot;MSTTR&quot;, &quot;all&quot;), remove_numbers = TRUE, 
##     remove_punct = TRUE, remove_symbols = TRUE, remove_hyphens = FALSE, 
##     log.base = 10, MATTR_window = 100L, MSTTR_segment = 100L, 
##     ...) 
## {
##     measure &lt;- match.arg(measure, c(&quot;TTR&quot;, &quot;C&quot;, &quot;R&quot;, &quot;CTTR&quot;, 
##         &quot;U&quot;, &quot;S&quot;, &quot;K&quot;, &quot;I&quot;, &quot;D&quot;, &quot;Vm&quot;, &quot;Maas&quot;, &quot;MATTR&quot;, &quot;MSTTR&quot;, 
##         &quot;all&quot;), several.ok = TRUE)
##     UseMethod(&quot;textstat_lexdiv&quot;)
## }
## &lt;bytecode: 0x000000001d241dd8&gt;
## &lt;environment: namespace:quanteda.textstats&gt;</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="debug.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># works but the implementation is still hidden because method will be decided based on the class provided to the method at the exact moment of calculation</span></span></code></pre></div>
<p>But If you still want to know how to know the definition of a method of the class. Just use this code.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="debug.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getAnywhere</span>(<span class="st">&quot;textstat_lexdiv.dfm&quot;</span>)</span></code></pre></div>
<pre><code>## A single object matching &#39;textstat_lexdiv.dfm&#39; was found
## It was found in the following places
##   namespace:quanteda.textstats
## with value
## 
## function (x, measure = c(&quot;TTR&quot;, &quot;C&quot;, &quot;R&quot;, &quot;CTTR&quot;, &quot;U&quot;, &quot;S&quot;, &quot;K&quot;, 
##     &quot;I&quot;, &quot;D&quot;, &quot;Vm&quot;, &quot;Maas&quot;, &quot;all&quot;), remove_numbers = TRUE, remove_punct = TRUE, 
##     remove_symbols = TRUE, remove_hyphens = FALSE, log.base = 10, 
##     ...) 
## {
##     tokens_only_measures &lt;- c(&quot;MATTR&quot;, &quot;MSTTR&quot;)
##     x &lt;- as.dfm(x)
##     if (!sum(x)) 
##         stop(message_error(&quot;dfm_empty&quot;))
##     if (remove_hyphens) 
##         x &lt;- dfm_split_hyphenated_features(x)
##     removals &lt;- removals_regex(separators = FALSE, punct = remove_punct, 
##         symbols = remove_symbols, numbers = remove_numbers, url = TRUE)
##     if (length(removals)) {
##         x &lt;- dfm_remove(x, paste(unlist(removals), collapse = &quot;|&quot;), 
##             valuetype = &quot;regex&quot;)
##     }
##     if (!sum(x)) 
##         stop(message_error(&quot;dfm_empty after removal of numbers, symbols, punctuations, hyphens&quot;))
##     if (any(tokens_only_measures %in% measure)) 
##         stop(&quot;average-based measures are only available for tokens inputs&quot;)
##     available_measures &lt;- as.character(formals()$measure)[-1]
##     measure &lt;- match.arg(measure, choices = available_measures, 
##         several.ok = !missing(measure))
##     if (&quot;all&quot; %in% measure) 
##         measure &lt;- available_measures[!available_measures %in% 
##             &quot;all&quot;]
##     compute_lexdiv_dfm_stats(x, measure = measure, log.base = log.base)
## }
## &lt;bytecode: 0x000000001a9fe8a0&gt;
## &lt;environment: namespace:quanteda.textstats&gt;</code></pre>
<p>If you want to understand more of this learn OOPS in R. R has multiple object oriented systems and R is a highly Object oriented programming but the style is different from other languages. This book is all about best practices in R and thus we are not going to go deep into fundamentals of R programming here but this trick is worth knowing.</p>
<p>These tricks will help you read code that is loaded on your environment but you have not written them. Reading someone else’s code makes you a better coder. And it helps you understand why this code is breaking up.</p>
</div>
<div id="version-control-system" class="section level2" number="8.4">
<h2><span class="header-section-number">8.4</span> Version Control System</h2>
<p>Use a version control system. For those who don’t know, it means you can commit changes to a central repository and compare the changes anytime. <strong>GitHub</strong> and <strong>BitBucket</strong> are the most popular of these solution.</p>
<p>Github allows a free account for every individual. Even for personal projects I would recommend you to use github or any version control system as such. For bigger projects use the one your organization recommends. This will help you compare changes you commit and go back to the old version that is up and running.</p>
<p>It sounds easy but the power to compare what you changed in the code can help you pin point the error as quickly as possible.</p>
</div>
<div id="make-small-commits" class="section level2" number="8.5">
<h2><span class="header-section-number">8.5</span> Make small commits</h2>
<p>You should always use small commits. I have seen people who keep the code with themselves for days and change a thousand thing in the code before pushing it to github. I too am one of those people.</p>
<p>Make small changes to your code and see if it’s working and then commit those changes. The smaller the commits the better debugging experience you have. Then it’s easier to roll back the changes and it’s easier to read the code to understand what might have caused this error.</p>
</div>
<div id="use-curly-brackets" class="section level2" number="8.6">
<h2><span class="header-section-number">8.6</span> Use curly brackets</h2>
<p>R gives you the ability to write code without <code>{}</code> but It makes your code harder to read and understand the blocks in segregation. I have seen people write code like this</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="debug.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># if statements</span></span>
<span id="cb61-2"><a href="debug.html#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>( <span class="cn">TRUE</span> ) <span class="fu">print</span>(<span class="cn">TRUE</span>) <span class="cf">else</span> <span class="fu">print</span>(<span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="debug.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># loops</span></span>
<span id="cb63-2"><a href="debug.html#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="fu">print</span>(i)</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6
## [1] 7
## [1] 8
## [1] 9
## [1] 10</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="debug.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># functions</span></span>
<span id="cb65-2"><a href="debug.html#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span>(x) <span class="fu">print</span>(x)</span></code></pre></div>
<pre><code>## function(x) print(x)</code></pre>
<p>It sure makes your code look concise but only when it’s as small as what I wrote. Even then I would advice you to use curly brackets in all possible scenarios. Which helps specially when the code gets bigger or when you are using multiple of these statements together. Let’s take this code for example.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="debug.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span>(x)</span>
<span id="cb67-2"><a href="debug.html#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb67-3"><a href="debug.html#cb67-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>( i <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span> ) <span class="fu">print</span>(<span class="cn">TRUE</span>) <span class="cf">else</span> <span class="fu">print</span>(<span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## function(x)
##   for(i in 1:10)
##     if( i %% 2 == 0 ) print(TRUE) else print(FALSE)</code></pre>
<p>During big apps you are never sure of how many lines you need to write inside a function or a loop or a conditional and you have to update your code frequently. Without curly brackets it gets harder and harder to pin point the block that is causing the error.</p>
<p>So in short using curly brackets help you understand the logic a little better and makes it easier to pin point the block that’s causing the error.</p>
</div>
<div id="always-use-named-parameters" class="section level2" number="8.7">
<h2><span class="header-section-number">8.7</span> Always use named parameters</h2>
<p>Let’s compare two code in the below chunk.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="debug.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code with named parameters</span></span>
<span id="cb69-2"><a href="debug.html#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb69-3"><a href="debug.html#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="co"># call_cognitive_endpoint(</span></span>
<span id="cb69-4"><a href="debug.html#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   endpoint = speech$get_endpoint(),</span></span>
<span id="cb69-5"><a href="debug.html#cb69-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   operation = &quot;models/base&quot;,</span></span>
<span id="cb69-6"><a href="debug.html#cb69-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   body = list(),</span></span>
<span id="cb69-7"><a href="debug.html#cb69-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   options = list(),</span></span>
<span id="cb69-8"><a href="debug.html#cb69-8" aria-hidden="true" tabindex="-1"></a><span class="co">#   headers = list(`content-type` = &#39;audio/wav&#39;),</span></span>
<span id="cb69-9"><a href="debug.html#cb69-9" aria-hidden="true" tabindex="-1"></a><span class="co">#   http_verb = &quot;POST&quot;</span></span>
<span id="cb69-10"><a href="debug.html#cb69-10" aria-hidden="true" tabindex="-1"></a><span class="co"># )</span></span>
<span id="cb69-11"><a href="debug.html#cb69-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-12"><a href="debug.html#cb69-12" aria-hidden="true" tabindex="-1"></a><span class="co"># -----------------</span></span>
<span id="cb69-13"><a href="debug.html#cb69-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-14"><a href="debug.html#cb69-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Code without named parameters</span></span>
<span id="cb69-15"><a href="debug.html#cb69-15" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb69-16"><a href="debug.html#cb69-16" aria-hidden="true" tabindex="-1"></a><span class="co"># call_cognitive_endpoint(  </span></span>
<span id="cb69-17"><a href="debug.html#cb69-17" aria-hidden="true" tabindex="-1"></a><span class="co">#   speech$get_endpoint(),</span></span>
<span id="cb69-18"><a href="debug.html#cb69-18" aria-hidden="true" tabindex="-1"></a><span class="co">#   &quot;models/base&quot;,</span></span>
<span id="cb69-19"><a href="debug.html#cb69-19" aria-hidden="true" tabindex="-1"></a><span class="co">#   list(),</span></span>
<span id="cb69-20"><a href="debug.html#cb69-20" aria-hidden="true" tabindex="-1"></a><span class="co">#   list(),</span></span>
<span id="cb69-21"><a href="debug.html#cb69-21" aria-hidden="true" tabindex="-1"></a><span class="co">#   list(`content-type` = &#39;audio/wav&#39;),</span></span>
<span id="cb69-22"><a href="debug.html#cb69-22" aria-hidden="true" tabindex="-1"></a><span class="co">#   &quot;POST&quot;</span></span>
<span id="cb69-23"><a href="debug.html#cb69-23" aria-hidden="true" tabindex="-1"></a><span class="co"># )</span></span></code></pre></div>
<p>They are commented because we are only focusing on the structure of the function not the working of the function. Which of these codes looks more readable to you?</p>
<p>Can you be sure in the below function that you have provided arguments in the right order and you are using the function exactly as it is meant to be used? This is why named parameters actually save time during debugging compared to unnamed one. This also makes code transferable which means that any new person in the team can quickly pick up where you left of, because may be you are so familiar with a function that you assume naming the parameter is not required at all but someone else might not be so much familiar with it.</p>
<p>In big organizations where people come and go and anybody can be reassigned to the same code it helps to make it easy to read. And it will you in the long run when you will read your own code after say 1 to 2 years.</p>
</div>
<div id="log-the-errors" class="section level2" number="8.8">
<h2><span class="header-section-number">8.8</span> Log the errors</h2>
<p>This is an old advice I used in functions chapter where I asked you to use tryCatch in all the functions so that it doesn’t brake during production. To extend that I would also argue to add logs specially the errors onto a json file or a database table.</p>
<p>When you are running your code on your own computer you might get only 1000 bugs and you are prepared to handle those bugs in production. But suppose you create a shiny app that is used by 1000 more people. In those circumstances you will encounter which you might not be able to reproduce so easily and no body will tell you what bug your app still has. Logging errors is a standard practice in programming domain and it’s necessary for production grade apps, be it shiny app or a REST api.</p>
<p>There are many packages available in R for logging I don’t have a preference on any of them. It’s good to use a database instead of json.</p>
</div>
<div id="dont-use-already-used-names" class="section level2" number="8.9">
<h2><span class="header-section-number">8.9</span> Don’t Use already used names</h2>
<p>R allows you to override variable and function names that exist. But this is something you shouldn’t do. Not even once. I get it when you don’t know it collides with something but when you do you should avoid those names at all costs.</p>
<p>Take fro example <code>T</code> and <code>F</code> are just variables which have <code>TRUE</code> and <code>FALSE</code> values stored in them. They are not a replacement for boolean values.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="debug.html#cb70-1" aria-hidden="true" tabindex="-1"></a>T <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb70-2"><a href="debug.html#cb70-2" aria-hidden="true" tabindex="-1"></a>myvar <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb70-3"><a href="debug.html#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>( myvar <span class="sc">==</span> T ) <span class="fu">print</span>(<span class="cn">TRUE</span>) <span class="cf">else</span> <span class="fu">print</span>(<span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Here all your logic is gone because someone thought of renaming A variable T. Most common such error occurs on naming the object remember that these are all valid functions in base R.</p>
<ol style="list-style-type: decimal">
<li>dt</li>
<li>df</li>
<li>data</li>
</ol>
<p>These are just a few examples where you can mess up your code very easily without realizing that you are doing something very wrong here. Just like other programming languages will throw an error if you use an already defined name and wont allow you to reuse it, you should treat R the same even though it will not throw an error and you might be lucky enough that it will never throw and error. But you should get into a habit of not reusing function and object names in R as well.</p>
</div>
<div id="use-simple-code" class="section level2" number="8.10">
<h2><span class="header-section-number">8.10</span> Use Simple code</h2>
<p>R gives you a lot of flexibility in coding style. You can write very succinct and precise code with R with highly complex methods. But try to spread your code in decent number of lines so that you can read it later on. Let me give you a very basic example.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="debug.html#cb72-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> y <span class="ot">&lt;-</span> z <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb72-2"><a href="debug.html#cb72-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-3"><a href="debug.html#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="do">## or</span></span>
<span id="cb72-4"><a href="debug.html#cb72-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-5"><a href="debug.html#cb72-5" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">3</span>; y <span class="ot">&lt;-</span> <span class="dv">5</span>; z <span class="ot">&lt;-</span> <span class="dv">8</span></span>
<span id="cb72-6"><a href="debug.html#cb72-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-7"><a href="debug.html#cb72-7" aria-hidden="true" tabindex="-1"></a><span class="do">## or</span></span>
<span id="cb72-8"><a href="debug.html#cb72-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-9"><a href="debug.html#cb72-9" aria-hidden="true" tabindex="-1"></a>foo <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb72-10"><a href="debug.html#cb72-10" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;&lt;-</span> x</span>
<span id="cb72-11"><a href="debug.html#cb72-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb72-12"><a href="debug.html#cb72-12" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;&lt;- is permisable only in very very very rare scenarios</span></span></code></pre></div>
<p>This is doable in R but doesn’t mean you should do it. This code could easily have been split into 6 lines and it will increase the readability of your code. People from specially <code>maths</code> , <code>finance</code>, <code>science</code> etc… background love to write complicated equations and they carry the same attitude to their coding style too… However <strong>coding is more about code maintenance than about writing code</strong> and you can’t hope that next person will have equal abilities that you do.</p>
<p><strong>Write simple and beautiful code is the best advice I can give in this entire chapter</strong>. This makes your life easier and of the people working with you.</p>
</div>
<div id="conclusion-5" class="section level2" number="8.11">
<h2><span class="header-section-number">8.11</span> Conclusion</h2>
<p>In this chapter we discussed multiple strategies of dealing with and avoiding debugging complexities. Hope if you follow most of these tricks you will feel that you are a better debugger than you were before and it will save you a lot of time in the process. To recap what we have learned today.</p>
<ol style="list-style-type: decimal">
<li>Write Tests as much as possible</li>
<li>Use print to point of where your code fails</li>
<li>use browser to check the code</li>
<li>always delete browser functions</li>
<li>read the function</li>
<li>You can even read hidden methods in R</li>
<li>Use version control system</li>
<li>make small commits</li>
<li>use curly brackets in all your code</li>
<li>Pass all arguments to a function through their name and not the position</li>
<li>log the errors</li>
<li>avoid already used function or object names</li>
<li>write simple code</li>
<li>avoid using <code>T</code>, <code>F</code> , <code>&lt;&lt;-</code> &amp; <code>;</code></li>
</ol>

</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="dataManagement.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="types.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/vikram-rawat/Best_R_Practices/blob/master/02-struct_07_debug.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["best_r_practices.pdf", "best_r_practices.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
